angular.module("ByGiro.signaturePad",[]).directive("signaturePad",["$window","$timeout",function(a,t){function n(a,n,s){function c(){if(s.model){var t=a.$root.$$phase;"$apply"==t||"$digest"==t?a.dataVal=i:a.$apply(function(){a.dataVal=i})}}var l=("undefined"!=typeof jQuery?jQuery:angular.element,{height:220,width:568,clearBtn:"Cancel"});for(var o in l)s[o]&&(l[o]=s[o]);a.opts=l,t(function(){r=n.find("canvas"),e=new SignaturePad(r.get(0)),a.signature&&!a.signature.$isEmpty&&a.signature.dataUrl&&e.fromDataURL(a.signature.dataUrl),r.on("mouseup",function(){i="",e.isEmpty()||(i=e.toDataURL()),c()})},0),a.clear=function(){e.clear(),i="",c()}}var e,i,r;return{restrict:"A",scope:{accept:"=",clear:"=",dataVal:"=?model"},link:n,template:'<div class=signature-container><canvas class=signature-pad height={{opts.height}} width={{opts.width}}></canvas><span class="btn btn-default btn-clear-sign" ng-click=clear()>{{opts.clearBtn}}</span></div>'}}]);